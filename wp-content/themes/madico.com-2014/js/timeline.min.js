(function(e){e(function(){function u(t,n){var s=r/100,o=t*-s,u=i*(t/100);t>=66?e("#legend.not-flipped").removeClass("not-flipped").addClass("flipped"):e("#legend.flipped").removeClass("flipped").addClass("not-flipped");n?e("#interactive").stop(!0,!0).animate({left:o+"%","margin-left":u+"px"},300):e("#interactive").css({left:o+"%","margin-left":u+"px"})}function f(){o.find(".ui-slider-handle").css({width:i,"margin-left":-i/2});e("#scroller").slider("value",50);a.css("width","0%");e("#scroller").slider("value",25)}function c(){e("#loading-wrapper").fadeOut(1700);setTimeout(h,1700)}function h(){e("#loading-wrapper").remove()}var t=e("#timeline-holder"),n=e("#interactive"),r=100,i=894,s=730,o=e("#scroller").slider({slide:function(e,t){u(t.value)}});e("#zoom .zoombtn").click(function(){e("#zoom .active").removeClass("active");e(this).addClass("active");r=e(this).attr("rel");var t=r/100,n=i*t,f=(1-t)*100/2;e("#legend .clicked").hide().removeClass("clicked");if(r==100){e("#xlabels .zoom2, #xlabels .zoom3").stop(!0,!0).animate({width:"0"},300);e(".default","#legend").show();e("#legend .default").removeClass("removed");e("#legend.flipped").removeClass("flipped").addClass("not-flipped")}if(r==200){e("#xlabels .zoom3").stop(!0,!0).animate({width:"0"},300);e("#xlabels .zoom2").stop(!0,!0).animate({width:"149px"},300);e(".default","#legend").addClass("removed")}if(r==400){e("#xlabels .zoom2, #xlabels .zoom3").stop(!0,!0).animate({width:"149px"},300);e(".default","#legend").addClass("removed")}if(t>1&&l){e("#scroller").find(".ui-slider-handle").stop(!0,!0).fadeIn(400);l=!1}if(t<=1&&!l){e("#scroller").find(".ui-slider-handle").stop(!0,!0).fadeOut(400);l=!0}t<1&&(t=1);o.find(".ui-slider-handle").css({width:s/t,"margin-left":-s/t/2});a.css("width",s-s/t);e("#interactive, #timeline, #timeline-events").stop(!0,!0).animate({width:n+"px"},300);u(e("#scroller").slider("value"),!0);r==100&&e("#legend.flipped").removeClass("flipped").addClass("not-flipped")});var a=o.find(".ui-slider-handle").mousedown(function(){e("#scroller").width(a.width())}).mouseup(function(){e("#scroller").width("100%")}).append("<span class='ui-icon ui-icon-grip-dotted-vertical'></span>").wrap("<div class='ui-handle-helper-parent'></div>").parent(),l=!0;e("#scroller .ui-slider-handle").fadeOut(0);setTimeout(f,10);e("#timeline-events .event a.top").hover(function(){var t=e(this).attr("rel"),n=e("#legend #"+t);if(n.hasClass("clicked"))return!1;n.addClass("active").stop(!0,!0).fadeIn(300);e("#legend .default, #legend .clicked").stop(!0,!0).fadeOut(300);return!1},function(){var t=e(this).attr("rel"),n=e("#legend #"+t);if(n.hasClass("clicked"))return!1;n.removeClass("active").stop(!0,!0).fadeOut(300);e("#legend .clicked, #legend .default:not(.removed)").stop(!0,!0).fadeIn(300)});e("#timeline-events .event a.top").click(function(){var t=e(this).attr("rel"),n=e("#legend #"+t);e("#legend .clicked").removeClass("clicked");n.addClass("clicked");e("#legend .default").addClass("removed");return!1});setTimeout(c,500)})})(jQuery);